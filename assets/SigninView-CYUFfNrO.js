import{_ as M}from"./logo-D7otNeMi.js";import{l as N,m as h,r as p,c as v,a as s,b as t,w as y,d as r,F as B,u as E,o as V,e as R,f as i,t as I,n as g,s as L}from"./index-DLEIqx4g.js";import{a as T}from"./api-BuVyP45F.js";const U={class:"text-center text-xl-start"},j={class:"signin d-flex justify-content-center align-items-center flex-wrap"},z={key:0,class:"mb-11 py-11 alert alert-danger"},A={class:"mb-8"},D={class:"mb-8"},G={class:"text-center"},H=["disabled"],Q={__name:"SigninView",setup(J){const w=E(),k=N(),F=h(),{openLoading:S,closeLoading:b}=k,{pushMessage:d}=F,x=p(),m=p(""),a=p({email:"",password:""});async function q(){var c,e;S();try{const l=await T(a.value),{status:o,data:n}=l.data;o==="success"?(L(n.token),x.value.resetForm(),d({style:"success",title:"登入成功",text:"登入成功，將跳轉至管理頁面"}),w.push("/dashboard")):d({style:"danger",title:"登入失敗",text:"登入失敗，請重新登入"}),b()}catch(l){d({style:"danger",title:"登入失敗",text:"登入失敗請，重新登入"}),m.value=((e=(c=l.response)==null?void 0:c.data)==null?void 0:e.message)||"登入失敗，請重新登入",b()}}return(c,e)=>{const l=r("router-link"),o=r("VField"),n=r("ErrorMessage"),C=r("VForm");return V(),v(B,null,[s("nav",U,[t(l,{to:"/signin",class:"d-inline-block px-md-13 py-8"},{default:y(()=>e[2]||(e[2]=[s("img",{src:M,alt:"logo"},null,-1)])),_:1})]),s("section",j,[t(C,{class:"signinForm px-8 px-sm-16 px-md-18 py-17 py-sm-18 bg-white rounded-3 shadow",onSubmit:q,ref_key:"form",ref:x},{default:y(({errors:f,meta:_})=>[e[6]||(e[6]=s("h1",{class:"mb-11 text-center h3"},"管理員介面",-1)),e[7]||(e[7]=s("p",{class:"mb-15 text-center text-muted lh-lg"},[i(" 歡迎來到我的秘密食譜 "),s("span",{class:"d-block"}," 請輸入管理員帳號和密碼登入 ")],-1)),m.value?(V(),v("p",z,[e[3]||(e[3]=s("i",{class:"bi bi-exclamation-triangle-fill me-4"},null,-1)),i(" "+I(m.value),1)])):R("",!0),s("div",A,[e[4]||(e[4]=s("label",{for:"email",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),i(" 電子信箱： ")],-1)),t(o,{type:"email",name:"電子信箱",id:"email",class:g(["form-control",{"is-invalid":f.電子信箱}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.email=u),required:""},null,8,["class","modelValue"]),t(n,{name:"電子信箱",class:"text-danger"})]),s("div",D,[e[5]||(e[5]=s("label",{for:"password",class:"d-block mb-4"},[s("span",{class:"text-danger"},"*"),i(" 密碼： ")],-1)),t(o,{type:"password",name:"密碼",id:"password",class:g(["form-control",{"is-invalid":f.密碼}]),placeholder:"請輸入密碼",rules:"required",modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.password=u),required:""},null,8,["class","modelValue"]),t(n,{name:"密碼",class:"text-danger"})]),e[8]||(e[8]=s("p",{class:"mb-13 text-end"},[s("a",{href:"#",class:"text-decoration-underline"},"忘記密碼？")],-1)),s("div",G,[s("button",{type:"submit","aria-disabled":"true",class:g(["w-75 btn btn-primary",{disabled:!_.valid}]),disabled:!_.valid}," 立即登入 ",10,H)])]),_:1},512)])],64)}}};export{Q as default};
